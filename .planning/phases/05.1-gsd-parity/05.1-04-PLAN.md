---
phase: 05.1-gsd-parity
plan: 04
type: execute
---

<objective>
Implement milestone management commands: /new-milestone, /complete-milestone, /discuss-milestone.

Purpose: Enable multi-milestone project support with milestone archival, transitions, and context gathering.
Output: Working milestone lifecycle commands.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**GSD references:**
@~/.claude/commands/gsd/new-milestone.md
@~/.claude/commands/gsd/complete-milestone.md
@~/.claude/commands/gsd/discuss-milestone.md
@~/.claude/get-shit-done/templates/milestone.md
@~/.claude/get-shit-done/templates/milestone-archive.md
@~/.claude/get-shit-done/templates/milestone-context.md

**Key patterns:**
- ROADMAP.md structure (03-02)
- User questioning (05.1-02 /discuss-phase)
- File archival patterns
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create new-milestone command</name>
  <files>src/chat/commands/newMilestone.ts</files>
  <action>
Create /new-milestone command that:

1. Validates current milestone is complete (all phases done)
2. Accepts milestone name/description as argument
3. Creates new milestone section in ROADMAP.md:
   - Version/number increment
   - Milestone name and goal
   - Empty phases list with first phase placeholder
4. Updates STATE.md:
   - Reset current position to new milestone
   - Archive previous milestone status
5. Creates milestone directory structure if needed
6. Commits: "docs(milestone): start Milestone {N} - {name}"

If previous milestone incomplete, warn and require /complete-milestone first.
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>New-milestone creates milestone structure</done>
</task>

<task type="auto">
  <name>Task 2: Create complete-milestone command</name>
  <files>src/chat/commands/completeMilestone.ts</files>
  <action>
Create /complete-milestone command that:

1. Validates all phases in current milestone are complete
2. Generates milestone summary:
   - What was accomplished (from all SUMMARY.md files)
   - Key decisions made (from STATE.md)
   - Issues resolved and deferred
   - Metrics (time, plans completed)
3. Creates MILESTONE-ARCHIVE.md or appends to existing:
   - Milestone name and dates
   - Phases completed with summaries
   - Key decisions
   - Lessons learned
4. Updates ROADMAP.md:
   - Mark milestone as complete
   - Add completion date
5. Updates STATE.md:
   - Clear current position
   - Ready for next milestone
6. Commits: "docs(milestone): complete Milestone {N}"

Offer to start next milestone (/new-milestone) or celebrate completion.
  </action>
  <verify>TypeScript compiles, milestone archives correctly</verify>
  <done>Complete-milestone archives and transitions</done>
</task>

<task type="auto">
  <name>Task 3: Create discuss-milestone and register all</name>
  <files>src/chat/commands/discussMilestone.ts, src/chat/commands/index.ts</files>
  <action>
Create /discuss-milestone command that:

1. For planning the next milestone before /new-milestone
2. Engages user with questions:
   - What's the goal for this milestone?
   - How does it relate to previous work?
   - What should be prioritized?
   - Any timeline constraints?
3. Generates MILESTONE-CONTEXT.md with:
   - Vision for milestone
   - Priority areas
   - Constraints
   - Success criteria
4. This context informs /new-milestone and subsequent /create-roadmap

Similar to /discuss-phase but at milestone level.

In index.ts:
1. Import all three handlers
2. Add to COMMAND_DEFINITIONS:
   - { name: 'new-milestone', description: 'Create a new milestone with phases' }
   - { name: 'complete-milestone', description: 'Archive completed milestone' }
   - { name: 'discuss-milestone', description: 'Gather context for next milestone' }
3. Register all handlers

Update /help and /progress to handle milestone transitions.
  </action>
  <verify>npm run compile succeeds, all commands work</verify>
  <done>Milestone management complete</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run compile` succeeds without errors
- [ ] `/discuss-milestone` gathers context for new milestone
- [ ] `/new-milestone "V2"` creates milestone structure
- [ ] `/complete-milestone` archives and transitions correctly
- [ ] /progress shows milestone status
- [ ] /help shows all new commands
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Milestone workflow matches GSD framework
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-gsd-parity/05.1-04-SUMMARY.md`
</output>
