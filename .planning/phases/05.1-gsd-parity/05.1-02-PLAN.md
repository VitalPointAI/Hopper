---
phase: 05.1-gsd-parity
plan: 02
type: execute
---

<objective>
Implement phase research and discussion commands: /research-phase, /discuss-phase, /list-phase-assumptions.

Purpose: Enable pre-planning research and context gathering for complex phases before creating execution plans.
Output: Working research and discussion commands that produce RESEARCH.md and CONTEXT.md files.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**GSD references:**
@~/.claude/commands/gsd/research-phase.md
@~/.claude/commands/gsd/discuss-phase.md
@~/.claude/commands/gsd/list-phase-assumptions.md
@~/.claude/get-shit-done/templates/research.md
@~/.claude/get-shit-done/templates/context.md

**Key patterns:**
- LLM for content generation (03-01, 03-03)
- WebSearch for research (via model tools)
- User questioning via stream interactions
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create research-phase command</name>
  <files>src/chat/commands/researchPhase.ts</files>
  <action>
Create /research-phase command that:

1. Validates phase number argument, checks if phase exists in roadmap
2. Checks if RESEARCH.md already exists (offer update/skip)
3. Loads project and phase context
4. Identifies research domains from phase description:
   - Core technology
   - Ecosystem/stack
   - Architecture patterns
   - Common pitfalls
   - What NOT to hand-roll
5. Uses LLM with web search capabilities to research each domain
6. Cross-verifies findings where possible
7. Creates {phase}-RESEARCH.md in phase directory with template structure:
   - Summary
   - Standard stack (with versions)
   - Architecture patterns (with code examples)
   - Don't hand-roll list
   - Common pitfalls
   - Code examples
   - Sources with confidence levels
8. Commits: "docs({phase}): complete phase research"

For niche domains (3D, audio, ML), this is critical before planning.
For commodity work, suggest skipping.
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>Research-phase generates comprehensive RESEARCH.md</done>
</task>

<task type="auto">
  <name>Task 2: Create discuss-phase command</name>
  <files>src/chat/commands/discussPhase.ts</files>
  <action>
Create /discuss-phase command that:

1. Validates phase number, checks if phase exists
2. Checks if CONTEXT.md already exists (offer update/skip)
3. Loads phase description from roadmap
4. Engages user in adaptive questioning:
   - What's the vision for this phase?
   - Any specific constraints or preferences?
   - Are there technologies already decided?
   - What should we avoid?
5. Uses LLM to synthesize answers into structured context
6. Creates {phase}-CONTEXT.md in phase directory:
   - Vision summary
   - Essential requirements
   - Constraints/boundaries
   - Technology preferences
   - Open questions
7. Commits: "docs({phase}): capture phase context"

This produces context that /plan-phase will load automatically.
Keep questions focused - 3-5 questions max, adaptive based on answers.
  </action>
  <verify>TypeScript compiles, user interaction works</verify>
  <done>Discuss-phase captures user context effectively</done>
</task>

<task type="auto">
  <name>Task 3: Create list-phase-assumptions and register all</name>
  <files>src/chat/commands/listPhaseAssumptions.ts, src/chat/commands/index.ts</files>
  <action>
Create /list-phase-assumptions command that:

1. Validates phase number
2. Uses LLM to analyze phase description and surface assumptions:
   - What technologies Claude would default to
   - What architecture patterns Claude would use
   - What scope Claude assumes
   - What Claude might get wrong
3. Presents assumptions clearly for user review
4. Offers to proceed to /discuss-phase if user wants to clarify
5. Does NOT create any files - purely informational

This helps users understand what Claude might assume before planning.

In index.ts:
1. Import all three handlers
2. Add to COMMAND_DEFINITIONS:
   - { name: 'research-phase', description: 'Research how to implement a phase before planning' }
   - { name: 'discuss-phase', description: 'Gather phase context through questioning' }
   - { name: 'list-phase-assumptions', description: "Surface Claude's assumptions about a phase" }
3. Register all handlers

Update /help output.
  </action>
  <verify>npm run compile succeeds, all three commands work</verify>
  <done>Research and discussion commands functional</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run compile` succeeds without errors
- [ ] `/research-phase 5` produces comprehensive RESEARCH.md
- [ ] `/discuss-phase 5` engages user and produces CONTEXT.md
- [ ] `/list-phase-assumptions 5` surfaces assumptions without creating files
- [ ] Files are committed after creation
- [ ] /help shows all new commands
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Pre-planning workflow matches GSD framework
</success_criteria>

<output>
After completion, create `.planning/phases/05.1-gsd-parity/05.1-02-SUMMARY.md`
</output>
