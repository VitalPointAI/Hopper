# UAT Issues: Phase 1.5 Plan 02

**Tested:** 2026-01-13
**Source:** .planning/phases/01.5-licensing/01.5-02-SUMMARY.md
**Tester:** User via /gsd:verify-work

## Summary

| Total | Critical | Major | Minor | Resolved |
|-------|----------|-------|-------|----------|
| 2     | 0        | 1     | 0     | 1        |

## Open Issues

### UAT-002: invoice.paid webhook cannot complete without deployed NEAR contract

**Discovered:** 2026-01-13
**Phase/Plan:** 01.5-02
**Severity:** Major
**Category:** Integration Dependency

**Description:**
The `invoice.paid` webhook handler attempts to call `grantLicense()` to extend the user's license on the NEAR contract. Without a deployed contract and configured credentials (`NEAR_PRIVATE_KEY`, `LICENSE_CONTRACT_ID`, `FASTNEAR_API_KEY`), this call fails and the subscription record is not saved to KV.

**Impact:**
- Subscription status always shows "none" even after successful Stripe payment
- Cancel subscription fails (no KV record to look up)
- Full payment â†’ license flow cannot be tested end-to-end

**Affected Components:**
- `workers/license-api/src/handlers/stripe-webhook.ts:142-148` - `grantLicense()` call
- `workers/license-api/src/services/near-contract.ts` - NEAR RPC integration

**Workaround:**
None for full flow testing. Stripe integration components (checkout, webhook receipt, status/cancel endpoints) work correctly in isolation.

**Resolution Path:**
Deploy NEAR license contract (prerequisite), then configure `.dev.vars`:
```
NEAR_PRIVATE_KEY=ed25519:xxx
LICENSE_CONTRACT_ID=license.specflow.near
FASTNEAR_API_KEY=xxx
```

---

## Resolved Issues

### UAT-001: .dev.vars.example missing NEAR_RPC_URL override note

**Discovered:** 2026-01-13
**Resolved:** 2026-01-13 - Fixed inline during UAT
**Phase/Plan:** 01.5-02
**Severity:** Minor
**Commit:** `93d0970`

Added NEAR_RPC_URL override comment with testnet FastNEAR URL.

---

*Phase: 01.5-licensing*
*Plan: 02*
*Tested: 2026-01-13*
