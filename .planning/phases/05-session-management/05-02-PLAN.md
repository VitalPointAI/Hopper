---
phase: 05-session-management
plan: 02
type: execute
---

<objective>
Implement /pause-work and /resume-work commands for session continuity.

Purpose: Enable users to pause work mid-phase with full context preservation and seamlessly resume in a new session with all state restored.
Output: Working pause/resume commands that create and consume .continue-here.md handoff files.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior work:**
@src/chat/commands/index.ts - Command registry
@src/chat/context/projectContext.ts - Context loading utilities
@src/chat/executor/gitService.ts - Git operations

**GSD references:**
@~/.claude/commands/gsd/pause-work.md - Pause command specification
@~/.claude/commands/gsd/resume-work.md - Resume command specification
@~/.claude/get-shit-done/templates/continue-here.md - Handoff file template

**Key patterns:**
- GlobalState for persistence (04-02)
- Git operations via gitService (04-03)
- LLM for context extraction (03-01)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create pause-work command handler</name>
  <files>src/chat/commands/pauseWork.ts</files>
  <action>
Create /pause-work command that:

1. Detects current phase directory from most recently modified files in .planning/phases/
2. Gathers current state:
   - Current phase and plan from STATE.md
   - Which task is in progress (from GlobalState checkpoint if exists)
   - Work completed this session (from recent SUMMARY.md files)
   - Work remaining in current plan
   - Any decisions made or blockers encountered
3. Uses LLM to generate context summary if user provides additional notes via prompt
4. Creates .continue-here.md in phase directory with template structure:
   - Frontmatter: phase, task, total_tasks, status, last_updated
   - Sections: current_state, completed_work, remaining_work, decisions_made, blockers, context, next_action
5. Commits the handoff file as WIP: "wip: [phase-name] paused at task [X]/[Y]"
6. Confirms creation with path and resume instructions

If no active work detected (no plan in progress), inform user there's nothing to pause.

DO NOT use git add -i or any interactive git commands. Use direct git add and git commit.
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>Pause handler creates .continue-here.md and commits it</done>
</task>

<task type="auto">
  <name>Task 2: Create resume-work command handler</name>
  <files>src/chat/commands/resumeWork.ts</files>
  <action>
Create /resume-work command that:

1. Searches for .continue-here.md files in .planning/phases/*/
2. If none found, check for incomplete plans (PLAN.md without SUMMARY.md)
3. If handoff file exists:
   - Parse frontmatter for position info
   - Display restored context clearly:
     * Where we left off (phase, task)
     * What was completed
     * What remains
     * Any blockers or decisions
     * The next action to take
4. Offer options via buttons:
   - "Continue from here" - Routes to /execute-plan with the plan path
   - "Start fresh" - Ignores handoff, routes to /progress
   - "View full context" - Shows the entire .continue-here.md content
5. If incomplete work detected but no handoff:
   - Show what plan is incomplete
   - Offer to execute it or start fresh

Update STATE.md's "Resume file" field when handoff is consumed.

After resuming, the .continue-here.md should be deleted (or moved to archive) once the plan completes.
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>Resume handler restores context and routes appropriately</done>
</task>

<task type="auto">
  <name>Task 3: Register commands and integrate with progress</name>
  <files>src/chat/commands/index.ts</files>
  <action>
1. Import handlePauseWork from './pauseWork'
2. Import handleResumeWork from './resumeWork'
3. Add to COMMAND_DEFINITIONS:
   - { name: 'pause-work', description: 'Save work state for later resumption' }
   - { name: 'resume-work', description: 'Resume work from previous session' }
4. Register both handlers in the registry

Also update /progress routing (from 05-01):
- If .continue-here.md exists, mention it in status and offer /resume-work
- Add "Handoff file exists" indicator in edge case handling

Update help command to include new commands in the list.
  </action>
  <verify>npm run compile succeeds, new commands appear in /help</verify>
  <done>Pause/resume commands registered and integrated</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run compile` succeeds without errors
- [ ] `/pause-work` creates .continue-here.md in correct location
- [ ] `/pause-work` commits the handoff file with WIP message
- [ ] `/resume-work` finds and parses handoff files
- [ ] `/resume-work` offers appropriate navigation options
- [ ] `/progress` mentions handoff file when present
- [ ] `/help` shows new commands
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Session continuity works across VSCode restarts
</success_criteria>

<output>
After completion, create `.planning/phases/05-session-management/05-02-SUMMARY.md`
</output>
