---
phase: 05-session-management
plan: 03
type: execute
---

<objective>
Implement /consider-issues command for deferred issue management and triage.

Purpose: Enable intelligent review of ISSUES.md with codebase awareness - identifying resolved issues, urgent items, and natural fits for upcoming phases.
Output: Working /consider-issues command that analyzes and triages deferred issues.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Prior work:**
@src/chat/commands/index.ts - Command registry
@src/chat/context/projectContext.ts - Context loading (includes issues parsing)

**GSD reference:**
@~/.claude/commands/gsd/consider-issues.md - Full specification

**Related templates:**
@~/.claude/get-shit-done/templates/issues.md - ISSUES.md format

**Key patterns:**
- LLM for analysis (03-01, 03-03)
- File editing via workspace API (03-01)
- User questions via stream options
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create consider-issues command handler</name>
  <files>src/chat/commands/considerIssues.ts</files>
  <action>
Create /consider-issues command that:

1. Verifies ISSUES.md exists in .planning/ (inform if not - means no deferred issues yet)
2. Parses all open issues from "## Open Enhancements" section:
   - ISS number (ISS-001, ISS-002, etc.)
   - Description
   - Discovered phase/date
   - Type (Performance/Refactoring/UX/Testing/Documentation/Accessibility)
   - Effort estimate
3. If no open issues, report "All clear" and exit

For each issue, use LLM to analyze against codebase:
- Build prompt with issue description and ask LLM to categorize:
  * Resolved (code changed, no longer applicable)
  * Urgent (blocking upcoming work)
  * Natural fit (aligns with upcoming phase)
  * Can wait (keep deferred)
- Include relevant file searches to provide context to LLM

Present categorized report with clear sections:
- Resolved (can close) - with reason and evidence
- Urgent (should address now) - with urgency reason
- Natural fit for upcoming work - with phase suggestion
- Can wait (no change) - status confirmation

Use stream.markdown() for the report. Be concise but informative.
  </action>
  <verify>TypeScript compiles without errors</verify>
  <done>Issue parser and analyzer created</done>
</task>

<task type="auto">
  <name>Task 2: Implement triage actions</name>
  <files>src/chat/commands/considerIssues.ts</files>
  <action>
Add action buttons after the analysis report:

Based on what was found, offer appropriate actions:

If resolved issues exist:
- "Close resolved issues" button - will move to Closed Enhancements section

If urgent issues exist:
- "Insert urgent phase" button - suggests /insert-phase command (coming in Phase 5.1)
- Note that user can continue and defer if they choose

If natural fits exist:
- Show which phase each fits with
- These will be picked up during /plan-phase

Always include:
- "Done for now" - acknowledgment, no changes

When "Close resolved issues" is selected:
1. Read current ISSUES.md
2. For each resolved issue:
   - Remove from "## Open Enhancements"
   - Add to "## Closed Enhancements" with resolution note and date
3. Write updated ISSUES.md using vscode.workspace.fs
4. Update STATE.md deferred issues count if it tracks this
5. Confirm what was closed

Use stream.button() for actions. The close action should use a registered command that performs the file updates.
  </action>
  <verify>TypeScript compiles, action handlers work correctly</verify>
  <done>Triage actions implemented with file update capability</done>
</task>

<task type="auto">
  <name>Task 3: Register command and create supporting command</name>
  <files>src/chat/commands/index.ts, src/extension.ts</files>
  <action>
1. Import handleConsiderIssues from './considerIssues'
2. Add to COMMAND_DEFINITIONS:
   - { name: 'consider-issues', description: 'Review and triage deferred issues' }
3. Register handler in the registry

In extension.ts, register a helper command for closing issues:
- Command: 'hopper.closeResolvedIssues'
- Takes issue IDs as argument
- Performs the file update operation described in Task 2
- This allows the button action to trigger the close operation

Update help to include the new command.
  </action>
  <verify>npm run compile succeeds, /consider-issues appears in /help</verify>
  <done>Command registered and helper command available</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run compile` succeeds without errors
- [ ] `/consider-issues` shows error message when no ISSUES.md exists
- [ ] `/consider-issues` parses and categorizes issues correctly
- [ ] Analysis report displays all four categories
- [ ] "Close resolved issues" action updates ISSUES.md file
- [ ] `/help` shows new command
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No TypeScript errors
- Issue triage workflow matches GSD framework
- Phase 5 complete - basic session management functional
</success_criteria>

<output>
After completion, create `.planning/phases/05-session-management/05-03-SUMMARY.md`

Also update STATE.md:
- Phase 5 complete
- Note: Phase 5.1 (GSD Feature Parity) ready for planning
</output>
